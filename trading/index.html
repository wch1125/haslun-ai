<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
  <meta name="theme-color" content="#0a0c0f">
  <title>HASLUN MISSION CONTROL</title>
  <link rel="icon" type="image/svg+xml" href="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'%3E%3Crect fill='%230a0c0f' width='100' height='100'/%3E%3Ccircle cx='50' cy='50' r='35' fill='none' stroke='%2333ff99' stroke-width='2'/%3E%3Ccircle cx='50' cy='50' r='25' fill='none' stroke='%2333ff99' stroke-width='1' opacity='0.5'/%3E%3Ccircle cx='50' cy='50' r='4' fill='%23ffb347'/%3E%3C/svg%3E">
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=IBM+Plex+Mono:wght@400;500;600&family=Space+Grotesk:wght@400;500;600&display=swap" rel="stylesheet">
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/chartjs-adapter-date-fns"></script>
  <style>
    :root {
      --bg-void: #050608;
      --bg-deep: #0a0c0f;
      --bg-panel: #0d1117;
      --bg-card: #151b23;
      --bg-input: #1a222c;
      --border: #1e2832;
      --border-glow: #2a3a4a;
      --grid-line: rgba(51, 255, 153, 0.08);
      --text-bright: #e8f4f0;
      --text: #a8c0b8;
      --text-muted: #5a7068;
      --text-dim: #3a4a44;
      --phosphor: #33ff99;
      --phosphor-dim: rgba(51, 255, 153, 0.6);
      --phosphor-glow: rgba(51, 255, 153, 0.15);
      --phosphor-ghost: rgba(51, 255, 153, 0.08);
      --amber: #ffb347;
      --amber-dim: rgba(255, 179, 71, 0.6);
      --amber-glow: rgba(255, 179, 71, 0.15);
      --signal-up: #33ff99;
      --signal-down: #ff6b6b;
      --signal-warn: #ffb347;
    }
    
    @keyframes scanline { 0% { transform: translateY(-100%); } 100% { transform: translateY(100vh); } }
    @keyframes pulse-glow { 0%, 100% { box-shadow: 0 0 20px rgba(51, 255, 153, 0.1); } 50% { box-shadow: 0 0 30px rgba(51, 255, 153, 0.2); } }
    @keyframes blink { 0%, 50% { opacity: 1; } 51%, 100% { opacity: 0; } }
    
    * { box-sizing: border-box; margin: 0; padding: 0; }
    
    body {
      font-family: 'IBM Plex Mono', monospace;
      background: var(--bg-void);
      color: var(--text);
      min-height: 100vh;
      overflow-x: hidden;
    }
    
    body::before {
      content: '';
      position: fixed;
      top: 0; left: 0; right: 0; bottom: 0;
      background: repeating-linear-gradient(0deg, transparent, transparent 2px, rgba(0, 0, 0, 0.15) 2px, rgba(0, 0, 0, 0.15) 4px);
      pointer-events: none;
      z-index: 10000;
    }
    
    body::after {
      content: '';
      position: fixed;
      top: 0; left: 0; right: 0;
      height: 4px;
      background: linear-gradient(180deg, transparent, rgba(51, 255, 153, 0.1), transparent);
      animation: scanline 8s linear infinite;
      pointer-events: none;
      z-index: 10001;
    }
    
    .grid-bg {
      position: fixed;
      top: 0; left: 0; right: 0; bottom: 0;
      background-image: linear-gradient(var(--grid-line) 1px, transparent 1px), linear-gradient(90deg, var(--grid-line) 1px, transparent 1px);
      background-size: 40px 40px;
      pointer-events: none;
      z-index: -1;
    }
    
    .header {
      display: flex;
      align-items: center;
      justify-content: space-between;
      padding: 0 1.5rem;
      height: 56px;
      background: linear-gradient(180deg, var(--bg-panel) 0%, var(--bg-deep) 100%);
      border-bottom: 1px solid var(--border);
      position: sticky;
      top: 0;
      z-index: 100;
    }
    
    .header::after {
      content: '';
      position: absolute;
      bottom: 0; left: 0; right: 0;
      height: 1px;
      background: linear-gradient(90deg, transparent, var(--phosphor-dim), transparent);
    }
    
    .header-left { display: flex; align-items: center; gap: 2rem; }
    .logo { display: flex; align-items: center; gap: 0.75rem; }
    .logo-mark { width: 32px; height: 32px; }
    .logo-mark svg { width: 100%; height: 100%; }
    .logo-text { font-family: 'Space Grotesk', sans-serif; font-size: 0.85rem; font-weight: 600; letter-spacing: 0.2em; color: var(--phosphor); text-shadow: 0 0 20px var(--phosphor-glow); }
    .logo-sub { font-size: 0.55rem; color: var(--text-muted); letter-spacing: 0.15em; margin-top: 2px; }
    
    .nav-tabs { display: flex; gap: 0.25rem; }
    .nav-tab {
      padding: 0.6rem 1rem;
      background: transparent;
      border: 1px solid transparent;
      border-radius: 0;
      color: var(--text-muted);
      font-family: 'IBM Plex Mono', monospace;
      font-size: 0.7rem;
      font-weight: 500;
      letter-spacing: 0.1em;
      text-transform: uppercase;
      cursor: pointer;
      transition: all 0.2s;
      position: relative;
    }
    .nav-tab:hover { color: var(--text); background: var(--phosphor-ghost); }
    .nav-tab.active { color: var(--phosphor); border-color: var(--phosphor-dim); background: var(--phosphor-ghost); text-shadow: 0 0 10px var(--phosphor-glow); }
    .nav-tab.active::after { content: ''; position: absolute; bottom: -1px; left: 0; right: 0; height: 1px; background: var(--phosphor); }
    
    .header-right { display: flex; align-items: center; gap: 1.5rem; }
    .status-indicator { display: flex; align-items: center; gap: 0.5rem; padding: 0.4rem 0.75rem; background: var(--bg-card); border: 1px solid var(--border); }
    .status-dot { width: 8px; height: 8px; border-radius: 50%; background: var(--amber); box-shadow: 0 0 10px var(--amber-glow); animation: pulse-glow 2s ease-in-out infinite; }
    .status-dot.live { background: var(--phosphor); box-shadow: 0 0 10px var(--phosphor-glow); }
    .status-text { font-size: 0.65rem; letter-spacing: 0.1em; text-transform: uppercase; color: var(--text-muted); }
    .demo-badge { padding: 0.3rem 0.6rem; background: var(--amber); font-size: 0.6rem; font-weight: 600; letter-spacing: 0.15em; color: var(--bg-void); text-transform: uppercase; }
    .time-display { font-size: 0.8rem; color: var(--phosphor); letter-spacing: 0.05em; text-shadow: 0 0 10px var(--phosphor-glow); }
    .time-display .blink { animation: blink 1s step-end infinite; }
    
    .main { display: flex; height: calc(100vh - 56px); }
    
    .sidebar { width: 280px; background: var(--bg-panel); border-right: 1px solid var(--border); display: flex; flex-direction: column; flex-shrink: 0; }
    .sidebar-section { padding: 1rem 1.25rem; border-bottom: 1px solid var(--border); }
    .sidebar-title { display: flex; align-items: center; gap: 0.5rem; font-size: 0.6rem; text-transform: uppercase; letter-spacing: 0.15em; color: var(--text-dim); margin-bottom: 0.85rem; }
    .sidebar-title::before { content: '//'; color: var(--phosphor-dim); }
    
    .stats-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 0.5rem; }
    .stat-box { padding: 0.75rem; background: var(--bg-card); border: 1px solid var(--border); position: relative; overflow: hidden; }
    .stat-box::before { content: ''; position: absolute; top: 0; left: 0; width: 3px; height: 100%; background: var(--phosphor-dim); opacity: 0.5; }
    .stat-box.highlight::before { background: var(--amber); }
    .stat-label { font-size: 0.55rem; color: var(--text-dim); letter-spacing: 0.1em; text-transform: uppercase; margin-bottom: 0.35rem; }
    .stat-value { font-size: 1rem; font-weight: 600; color: var(--text-bright); }
    .stat-value.positive { color: var(--signal-up); text-shadow: 0 0 15px var(--phosphor-glow); }
    .stat-value.negative { color: var(--signal-down); }
    
    .macd-display { display: flex; flex-direction: column; gap: 0.6rem; }
    .macd-row { display: flex; justify-content: space-between; align-items: center; padding: 0.4rem 0; border-bottom: 1px solid var(--border); }
    .macd-row:last-child { border-bottom: none; }
    .macd-label { font-size: 0.7rem; color: var(--text-muted); letter-spacing: 0.05em; }
    .macd-value { font-size: 0.8rem; font-weight: 500; }
    .macd-value.positive { color: var(--signal-up); }
    .macd-value.negative { color: var(--signal-down); }
    
    .watchlist { flex: 1; overflow-y: auto; }
    .watchlist::-webkit-scrollbar { width: 4px; }
    .watchlist::-webkit-scrollbar-track { background: var(--bg-deep); }
    .watchlist::-webkit-scrollbar-thumb { background: var(--border-glow); }
    
    .watchlist-item { display: flex; justify-content: space-between; align-items: center; padding: 0.75rem 1.25rem; cursor: pointer; border-bottom: 1px solid var(--border); transition: all 0.15s; position: relative; }
    .watchlist-item::before { content: ''; position: absolute; left: 0; top: 0; bottom: 0; width: 2px; background: transparent; transition: background 0.15s; }
    .watchlist-item:hover { background: var(--phosphor-ghost); }
    .watchlist-item:hover::before { background: var(--phosphor-dim); }
    .watchlist-item.active { background: var(--phosphor-ghost); }
    .watchlist-item.active::before { background: var(--phosphor); box-shadow: 0 0 10px var(--phosphor-glow); }
    .watchlist-info { display: flex; flex-direction: column; gap: 0.2rem; }
    .watchlist-ticker { font-size: 0.85rem; font-weight: 600; color: var(--text-bright); letter-spacing: 0.05em; }
    .watchlist-meta { font-size: 0.6rem; color: var(--text-dim); letter-spacing: 0.08em; text-transform: uppercase; }
    .watchlist-data { text-align: right; }
    .watchlist-price { font-size: 0.85rem; color: var(--text); }
    .watchlist-change { font-size: 0.7rem; margin-top: 0.15rem; }
    .watchlist-change.positive { color: var(--signal-up); }
    .watchlist-change.negative { color: var(--signal-down); }
    
    .content { flex: 1; display: flex; flex-direction: column; min-width: 0; overflow: hidden; background: var(--bg-deep); }
    .tab-panel { display: none; flex: 1; flex-direction: column; overflow: hidden; }
    .tab-panel.active { display: flex; }
    
    .chart-header { display: flex; justify-content: space-between; align-items: center; padding: 0.75rem 1.25rem; background: var(--bg-panel); border-bottom: 1px solid var(--border); flex-wrap: wrap; gap: 0.75rem; }
    .chart-header-left { display: flex; align-items: center; gap: 1.5rem; }
    .ticker-display { display: flex; align-items: baseline; gap: 1rem; }
    .ticker-symbol { font-size: 1.4rem; font-weight: 600; color: var(--phosphor); letter-spacing: 0.1em; text-shadow: 0 0 20px var(--phosphor-glow); }
    .ticker-price { font-size: 1.1rem; color: var(--text-bright); }
    .ticker-change { font-size: 0.85rem; }
    .ticker-change.positive { color: var(--signal-up); }
    .ticker-change.negative { color: var(--signal-down); }
    
    .control-group { display: flex; gap: 0.25rem; }
    .ctrl-btn { padding: 0.45rem 0.7rem; background: transparent; border: 1px solid var(--border); color: var(--text-muted); font-family: 'IBM Plex Mono', monospace; font-size: 0.65rem; letter-spacing: 0.08em; cursor: pointer; transition: all 0.15s; }
    .ctrl-btn:hover { color: var(--text); border-color: var(--border-glow); background: var(--phosphor-ghost); }
    .ctrl-btn.active { color: var(--phosphor); border-color: var(--phosphor-dim); background: var(--phosphor-ghost); }
    .chart-tools { display: flex; gap: 1rem; align-items: center; }
    .tool-divider { width: 1px; height: 20px; background: var(--border); }
    
    .chart-container { flex: 1; display: flex; flex-direction: column; padding: 1rem; min-height: 0; }
    .price-chart-wrapper { flex: 3; position: relative; min-height: 200px; background: var(--bg-panel); border: 1px solid var(--border); padding: 0.5rem; }
    .macd-chart-wrapper { flex: 1; position: relative; min-height: 100px; background: var(--bg-panel); border: 1px solid var(--border); border-top: none; padding: 0.5rem; }
    
    .positions-content { flex: 1; overflow-y: auto; padding: 1.25rem; }
    .positions-grid { display: grid; grid-template-columns: repeat(4, 1fr); gap: 1rem; margin-bottom: 1.5rem; }
    .metric-card { background: var(--bg-panel); border: 1px solid var(--border); padding: 1.25rem; position: relative; }
    .metric-card::before { content: ''; position: absolute; top: 0; left: 0; right: 0; height: 2px; background: linear-gradient(90deg, var(--phosphor), transparent); }
    .metric-value { font-size: 1.6rem; font-weight: 600; color: var(--text-bright); margin-bottom: 0.35rem; }
    .metric-value.positive { color: var(--signal-up); text-shadow: 0 0 20px var(--phosphor-glow); }
    .metric-label { font-size: 0.6rem; color: var(--text-dim); letter-spacing: 0.12em; text-transform: uppercase; }
    
    .card { background: var(--bg-panel); border: 1px solid var(--border); margin-bottom: 1.25rem; }
    .card-header { display: flex; justify-content: space-between; align-items: center; padding: 1rem 1.25rem; border-bottom: 1px solid var(--border); background: var(--bg-card); }
    .card-label { font-size: 0.55rem; letter-spacing: 0.12em; text-transform: uppercase; color: var(--phosphor-dim); margin-bottom: 0.25rem; }
    .card-title { font-family: 'Space Grotesk', sans-serif; font-size: 1rem; font-weight: 500; color: var(--text-bright); }
    .card-body { padding: 1.25rem; }
    
    .data-table { width: 100%; border-collapse: collapse; }
    .data-table th { text-align: left; padding: 0.75rem 1rem; font-size: 0.6rem; font-weight: 500; letter-spacing: 0.12em; text-transform: uppercase; color: var(--text-dim); border-bottom: 1px solid var(--border); background: var(--bg-card); }
    .data-table td { padding: 0.85rem 1rem; font-size: 0.8rem; border-bottom: 1px solid var(--border); color: var(--text); }
    .data-table tr:hover { background: var(--phosphor-ghost); }
    
    .ticker-tag { display: inline-flex; align-items: center; gap: 0.4rem; padding: 0.3rem 0.6rem; background: var(--bg-input); border: 1px solid var(--border); font-size: 0.75rem; font-weight: 600; color: var(--text-bright); letter-spacing: 0.05em; }
    .ticker-dot { width: 6px; height: 6px; border-radius: 50%; }
    .structure-tag { display: inline-block; padding: 0.25rem 0.5rem; background: var(--bg-input); border: 1px solid var(--border); font-size: 0.6rem; letter-spacing: 0.08em; text-transform: uppercase; color: var(--text-muted); }
    .pnl-positive { color: var(--signal-up); }
    .pnl-negative { color: var(--signal-down); }
    
    .chart-tabs { display: flex; gap: 0.25rem; margin-bottom: 1.25rem; }
    .chart-tab { padding: 0.5rem 0.85rem; background: transparent; border: 1px solid var(--border); color: var(--text-muted); font-family: 'IBM Plex Mono', monospace; font-size: 0.65rem; letter-spacing: 0.08em; text-transform: uppercase; cursor: pointer; transition: all 0.15s; }
    .chart-tab:hover, .chart-tab.active { color: var(--phosphor); border-color: var(--phosphor-dim); background: var(--phosphor-ghost); }
    .chart-panel { display: none; }
    .chart-panel.active { display: block; }
    
    .bar-chart { display: flex; flex-direction: column; gap: 0.6rem; }
    .bar-row { display: grid; grid-template-columns: 55px 1fr 70px; align-items: center; gap: 1rem; }
    .bar-ticker { font-size: 0.75rem; font-weight: 600; color: var(--text); letter-spacing: 0.05em; }
    .bar-container { height: 24px; background: var(--bg-input); border: 1px solid var(--border); overflow: hidden; }
    .bar-fill { height: 100%; display: flex; align-items: center; padding-left: 0.6rem; font-size: 0.6rem; font-weight: 600; color: var(--bg-void); background: var(--phosphor); }
    .bar-value { font-size: 0.75rem; text-align: right; color: var(--text); }
    
    .pnl-row { display: grid; grid-template-columns: 55px 1fr 80px; align-items: center; gap: 1rem; margin-bottom: 0.6rem; }
    .pnl-bar-container { height: 22px; display: flex; align-items: center; position: relative; background: var(--bg-input); border: 1px solid var(--border); }
    .pnl-center-line { position: absolute; left: 50%; top: 0; bottom: 0; width: 1px; background: var(--border-glow); }
    .pnl-bar { position: absolute; height: calc(100% - 4px); top: 2px; display: flex; align-items: center; font-size: 0.55rem; font-weight: 600; padding: 0 0.4rem; min-width: fit-content; }
    .pnl-bar.positive { left: 50%; background: var(--signal-up); color: var(--bg-void); }
    .pnl-bar.negative { right: 50%; background: var(--signal-down); color: #fff; justify-content: flex-end; }
    .pnl-amount { font-size: 0.75rem; text-align: right; }
    .pnl-amount.positive { color: var(--signal-up); }
    .pnl-amount.negative { color: var(--signal-down); }
    
    .summary-row { display: flex; justify-content: space-around; padding: 1rem; background: var(--bg-card); border: 1px solid var(--border); margin-top: 1.25rem; }
    .summary-item { text-align: center; }
    .summary-value { font-size: 1.1rem; font-weight: 600; color: var(--text-bright); }
    .summary-value.positive { color: var(--signal-up); }
    .summary-value.negative { color: var(--signal-down); }
    .summary-label { font-size: 0.55rem; letter-spacing: 0.1em; text-transform: uppercase; color: var(--text-dim); margin-top: 0.25rem; }
    
    .catalyst-list { display: flex; flex-direction: column; gap: 0.5rem; }
    .catalyst-item { display: flex; align-items: center; gap: 1.25rem; padding: 1rem 1.25rem; background: var(--bg-card); border: 1px solid var(--border); transition: all 0.15s; }
    .catalyst-item:hover { border-color: var(--phosphor-dim); background: var(--phosphor-ghost); }
    .catalyst-date { font-size: 0.75rem; color: var(--text-muted); min-width: 85px; letter-spacing: 0.02em; }
    .catalyst-ticker { font-size: 0.8rem; font-weight: 600; min-width: 55px; letter-spacing: 0.05em; }
    .catalyst-event { flex: 1; font-size: 0.8rem; color: var(--text); }
    .catalyst-impact { padding: 0.3rem 0.6rem; font-size: 0.6rem; font-weight: 600; letter-spacing: 0.1em; text-transform: uppercase; border: 1px solid; }
    .catalyst-impact.high { border-color: var(--signal-down); color: var(--signal-down); background: rgba(255, 107, 107, 0.1); }
    .catalyst-impact.medium { border-color: var(--amber); color: var(--amber); background: rgba(255, 179, 71, 0.1); }
    .catalyst-impact.low { border-color: var(--signal-up); color: var(--signal-up); background: var(--phosphor-ghost); }
    
    .right-sidebar { width: 260px; background: var(--bg-panel); border-left: 1px solid var(--border); display: flex; flex-direction: column; flex-shrink: 0; }
    .kill-switch-section { padding: 1.25rem; border-bottom: 1px solid var(--border); }
    .kill-switch-btn { width: 100%; padding: 0.85rem; border: none; font-family: 'IBM Plex Mono', monospace; font-size: 0.75rem; font-weight: 600; letter-spacing: 0.1em; text-transform: uppercase; cursor: pointer; transition: all 0.15s; }
    .kill-switch-btn.stop { background: var(--signal-down); color: #fff; }
    .kill-switch-btn.stop:hover { filter: brightness(1.1); }
    .kill-switch-btn.resume { background: var(--signal-up); color: var(--bg-void); }
    .kill-switch-status { text-align: center; font-size: 0.65rem; letter-spacing: 0.08em; color: var(--text-muted); margin-top: 0.6rem; }
    
    .safety-list { padding: 0.5rem 0; }
    .safety-item { display: flex; justify-content: space-between; align-items: center; padding: 0.6rem 0; border-bottom: 1px solid var(--border); }
    .safety-item:last-child { border-bottom: none; }
    .safety-label { font-size: 0.7rem; color: var(--text-muted); }
    .safety-value { font-size: 0.7rem; }
    .safety-value.ok { color: var(--signal-up); }
    .safety-value.warning { color: var(--amber); }
    
    .activity-feed { flex: 1; overflow-y: auto; padding: 0.75rem; }
    .activity-item { display: flex; gap: 0.85rem; padding: 0.75rem; border-bottom: 1px solid var(--border); transition: background 0.15s; }
    .activity-item:hover { background: var(--phosphor-ghost); }
    .activity-icon { width: 28px; height: 28px; display: flex; align-items: center; justify-content: center; flex-shrink: 0; border: 1px solid var(--border); }
    .activity-icon.trade { border-color: var(--phosphor-dim); color: var(--phosphor); }
    .activity-icon.alert { border-color: var(--amber-dim); color: var(--amber); }
    .activity-icon svg { width: 14px; height: 14px; }
    .activity-content { flex: 1; min-width: 0; }
    .activity-title { font-size: 0.75rem; font-weight: 500; color: var(--text); }
    .activity-subtitle { font-size: 0.65rem; color: var(--text-muted); margin-top: 0.15rem; }
    .activity-time { font-size: 0.55rem; color: var(--text-dim); letter-spacing: 0.05em; }
    
    .watermark { position: fixed; bottom: 1.25rem; left: 1.25rem; display: flex; align-items: center; gap: 0.85rem; padding: 0.6rem 1rem; background: var(--bg-panel); border: 1px solid var(--border); font-size: 0.7rem; color: var(--text-muted); z-index: 50; }
    .watermark a { color: var(--amber); text-decoration: none; letter-spacing: 0.05em; }
    .watermark a:hover { text-shadow: 0 0 10px var(--amber-glow); }
    
    @media (max-width: 1200px) { .right-sidebar { display: none; } }
    @media (max-width: 900px) { .sidebar { width: 240px; } .positions-grid { grid-template-columns: repeat(2, 1fr); } }
    @media (max-width: 768px) { .sidebar { display: none; } .positions-grid { grid-template-columns: 1fr 1fr; } .nav-tab { padding: 0.4rem 0.6rem; font-size: 0.6rem; } }
  </style>
</head>
<body>
  <div class="grid-bg"></div>
  
  <header class="header">
    <div class="header-left">
      <div class="logo">
        <div class="logo-mark">
          <svg viewBox="0 0 32 32" fill="none">
            <circle cx="16" cy="16" r="14" stroke="var(--phosphor)" stroke-width="1.5" opacity="0.4"/>
            <circle cx="16" cy="16" r="10" stroke="var(--phosphor)" stroke-width="1" opacity="0.6"/>
            <circle cx="16" cy="16" r="6" stroke="var(--phosphor)" stroke-width="1.5"/>
            <circle cx="16" cy="16" r="2" fill="var(--amber)"/>
            <line x1="16" y1="2" x2="16" y2="6" stroke="var(--phosphor)" stroke-width="1" opacity="0.5"/>
            <line x1="16" y1="26" x2="16" y2="30" stroke="var(--phosphor)" stroke-width="1" opacity="0.5"/>
            <line x1="2" y1="16" x2="6" y2="16" stroke="var(--phosphor)" stroke-width="1" opacity="0.5"/>
            <line x1="26" y1="16" x2="30" y2="16" stroke="var(--phosphor)" stroke-width="1" opacity="0.5"/>
          </svg>
        </div>
        <div>
          <div class="logo-text">HASLUN</div>
          <div class="logo-sub">MISSION CONTROL</div>
        </div>
      </div>
      <nav class="nav-tabs">
        <button class="nav-tab active" data-tab="chart" onclick="switchTab('chart')">TELEMETRY</button>
        <button class="nav-tab" data-tab="positions" onclick="switchTab('positions')">HOLDINGS</button>
        <button class="nav-tab" data-tab="options" onclick="switchTab('options')">DERIVATIVES</button>
        <button class="nav-tab" data-tab="catalysts" onclick="switchTab('catalysts')">EVENTS</button>
      </nav>
    </div>
    <div class="header-right">
      <span class="demo-badge">SIMULATION</span>
      <div class="status-indicator">
        <span class="status-dot"></span>
        <span class="status-text">Market Closed</span>
      </div>
      <span class="time-display" id="time-display">--<span class="blink">:</span>--</span>
    </div>
  </header>
  
  <main class="main">
    <aside class="sidebar">
      <div class="sidebar-section">
        <div class="sidebar-title">Portfolio Status</div>
        <div class="stats-grid">
          <div class="stat-box highlight"><div class="stat-label">Today P&L</div><div class="stat-value positive">+$1,172</div></div>
          <div class="stat-box"><div class="stat-label">Total P&L</div><div class="stat-value positive">+$34,015</div></div>
          <div class="stat-box"><div class="stat-label">Positions</div><div class="stat-value">10</div></div>
          <div class="stat-box"><div class="stat-label">Win Rate</div><div class="stat-value positive">90%</div></div>
        </div>
      </div>
      <div class="sidebar-section">
        <div class="sidebar-title">MACD Signal</div>
        <div class="macd-display">
          <div class="macd-row"><span class="macd-label">MACD</span><span class="macd-value positive" id="macd-val">0.3642</span></div>
          <div class="macd-row"><span class="macd-label">Signal</span><span class="macd-value" id="signal-val">0.2570</span></div>
          <div class="macd-row"><span class="macd-label">Histogram</span><span class="macd-value positive" id="hist-val">0.1073</span></div>
        </div>
      </div>
      <div class="sidebar-section" style="padding-bottom: 0.5rem;"><div class="sidebar-title">Tracking</div></div>
      <div class="watchlist" id="watchlist"></div>
    </aside>
    
    <div class="content">
      <div class="tab-panel active" id="chart-panel">
        <div class="chart-header">
          <div class="chart-header-left">
            <div class="ticker-display">
              <span class="ticker-symbol" id="chart-ticker">RKLB</span>
              <span class="ticker-price" id="chart-price">$72.43</span>
              <span class="ticker-change positive" id="chart-change">+2.16%</span>
            </div>
            <div class="control-group">
              <button class="ctrl-btn active" data-tf="1D" onclick="setTimeframe('1D')">1D</button>
              <button class="ctrl-btn" data-tf="45" onclick="setTimeframe('45')">45M</button>
            </div>
          </div>
          <div class="chart-tools">
            <button class="ctrl-btn active" id="ma-toggle" onclick="toggleMA()">MA</button>
            <div class="tool-divider"></div>
            <div class="control-group">
              <button class="ctrl-btn" data-range="1W" onclick="setRange('1W')">1W</button>
              <button class="ctrl-btn" data-range="1M" onclick="setRange('1M')">1M</button>
              <button class="ctrl-btn active" data-range="3M" onclick="setRange('3M')">3M</button>
              <button class="ctrl-btn" data-range="6M" onclick="setRange('6M')">6M</button>
              <button class="ctrl-btn" data-range="1Y" onclick="setRange('1Y')">1Y</button>
              <button class="ctrl-btn" data-range="ALL" onclick="setRange('ALL')">ALL</button>
            </div>
          </div>
        </div>
        <div class="chart-container">
          <div class="price-chart-wrapper"><canvas id="price-chart"></canvas></div>
          <div class="macd-chart-wrapper"><canvas id="macd-chart"></canvas></div>
        </div>
      </div>
      
      <div class="tab-panel" id="positions-panel">
        <div class="positions-content">
          <div class="positions-grid">
            <div class="metric-card"><div class="metric-value positive">+$1,172</div><div class="metric-label">Today's P&L</div></div>
            <div class="metric-card"><div class="metric-value">3</div><div class="metric-label">Trades Today</div></div>
            <div class="metric-card"><div class="metric-value">$17,536</div><div class="metric-label">Market Value</div></div>
            <div class="metric-card"><div class="metric-value">10</div><div class="metric-label">Open Positions</div></div>
          </div>
          <div class="card">
            <div class="card-header"><div><div class="card-label">// Active</div><div class="card-title">Stock Positions</div></div></div>
            <div class="card-body" style="padding: 0;"><table class="data-table"><thead><tr><th>Ticker</th><th>Sector</th><th>Shares</th><th>Entry</th><th>Current</th><th>Value</th><th>P&L</th></tr></thead><tbody id="stock-tbody"></tbody></table></div>
          </div>
        </div>
      </div>
      
      <div class="tab-panel" id="options-panel">
        <div class="positions-content">
          <div class="positions-grid">
            <div class="metric-card"><div class="metric-value">$39,315</div><div class="metric-label">Portfolio Value</div></div>
            <div class="metric-card"><div class="metric-value positive">+$34,015</div><div class="metric-label">Total P&L</div></div>
            <div class="metric-card"><div class="metric-value">23.55</div><div class="metric-label">Total Delta</div></div>
            <div class="metric-card"><div class="metric-value">12</div><div class="metric-label">Days to Expiry</div></div>
          </div>
          <div class="card">
            <div class="card-header"><div><div class="card-label">// Analytics</div><div class="card-title">Portfolio Insights</div></div></div>
            <div class="card-body">
              <div class="chart-tabs">
                <button class="chart-tab active" data-chart="sizes" onclick="switchChartTab('sizes')">Position Sizes</button>
                <button class="chart-tab" data-chart="pnl" onclick="switchChartTab('pnl')">P&L Distribution</button>
              </div>
              <div class="chart-panel active" id="chart-sizes"></div>
              <div class="chart-panel" id="chart-pnl"></div>
            </div>
          </div>
          <div class="card">
            <div class="card-header"><div><div class="card-label">// LEAPs & Spreads</div><div class="card-title">Options Positions</div></div></div>
            <div class="card-body" style="padding: 0;"><table class="data-table"><thead><tr><th>Ticker</th><th>Structure</th><th>Strikes</th><th>Entry</th><th>Current</th><th>P&L</th><th>Delta</th></tr></thead><tbody id="options-tbody"></tbody></table></div>
          </div>
        </div>
      </div>
      
      <div class="tab-panel" id="catalysts-panel">
        <div class="positions-content">
          <div class="card">
            <div class="card-header"><div><div class="card-label">// Upcoming</div><div class="card-title">Market Catalysts</div></div></div>
            <div class="card-body"><div class="catalyst-list" id="catalyst-list"></div></div>
          </div>
        </div>
      </div>
    </div>
    
    <aside class="right-sidebar">
      <div class="kill-switch-section">
        <div class="sidebar-title">Emergency Control</div>
        <button class="kill-switch-btn stop" onclick="toggleKillSwitch()">ABORT ALL TRADES</button>
        <div class="kill-switch-status">System operational</div>
      </div>
      <div class="sidebar-section">
        <div class="sidebar-title">Risk Parameters</div>
        <div class="safety-list">
          <div class="safety-item"><span class="safety-label">Daily Loss Limit</span><span class="safety-value ok">$200 remaining</span></div>
          <div class="safety-item"><span class="safety-label">Trades Remaining</span><span class="safety-value">2 of 5</span></div>
          <div class="safety-item"><span class="safety-label">Market Status</span><span class="safety-value warning">CLOSED</span></div>
        </div>
      </div>
      <div class="sidebar-section" style="padding-bottom: 0.5rem;"><div class="sidebar-title">Activity Log</div></div>
      <div class="activity-feed" id="activity-feed"></div>
    </aside>
  </main>
  
  <div class="watermark"><span>SIMULATION MODE</span><a href="https://haslun.ai">‚Üê haslun.ai</a></div>

  <script>
    let currentTicker = 'RKLB', currentTimeframe = '1D', currentRange = '3M', showMA = true;
    let priceChart = null, macdChart = null, tickerData = {}, statsData = {};
    
    const tickerColors = {
      'RKLB': '#33ff99', 'LUNR': '#47d4ff', 'ASTS': '#ffb347', 'ACHR': '#ff6b9d',
      'JOBY': '#b388ff', 'GME': '#ff6b6b', 'BKSY': '#47d4ff', 'RDW': '#33ff99',
      'PL': '#b388ff', 'EVEX': '#ff6b9d', 'MP': '#ffb347', 'KTOS': '#47d4ff',
      'IRDM': '#33ff99', 'HON': '#b388ff', 'ATI': '#ffb347', 'CACI': '#47d4ff', 'LOAR': '#ff6b9d'
    };
    
    const tickerThemes = {
      'RKLB': 'SPACE', 'LUNR': 'SPACE', 'ASTS': 'SPACE', 'BKSY': 'SPACE',
      'RDW': 'SPACE', 'PL': 'SPACE', 'IRDM': 'SPACE', 'KTOS': 'DEFENSE',
      'ACHR': 'eVTOL', 'JOBY': 'eVTOL', 'EVEX': 'eVTOL', 'GME': 'MEME',
      'MP': 'MATERIALS', 'HON': 'INDUSTRIAL', 'ATI': 'MATERIALS',
      'CACI': 'DEFENSE', 'LOAR': 'AEROSPACE'
    };
    
    const rangeDays = { '1W': 7, '1M': 30, '3M': 90, '6M': 180, '1Y': 365, 'ALL': 9999 };
    
    const DEMO_STOCK_POSITIONS = [
      { ticker: 'RKLB', shares: 75, entry_price: 68.45, current_price: 72.80 },
      { ticker: 'ASTS', shares: 50, entry_price: 78.20, current_price: 83.47 },
      { ticker: 'LUNR', shares: 100, entry_price: 15.20, current_price: 17.88 },
      { ticker: 'BKSY', shares: 200, entry_price: 3.85, current_price: 4.20 },
      { ticker: 'RDW', shares: 80, entry_price: 13.60, current_price: 15.00 },
      { ticker: 'PL', shares: 150, entry_price: 3.72, current_price: 4.00 },
      { ticker: 'ACHR', shares: 100, entry_price: 7.85, current_price: 8.13 },
      { ticker: 'JOBY', shares: 60, entry_price: 13.20, current_price: 14.36 },
      { ticker: 'EVEX', shares: 250, entry_price: 3.10, current_price: 2.80 },
      { ticker: 'GME', shares: 40, entry_price: 25.80, current_price: 27.50 }
    ];
    
    const DEMO_OPTIONS = [
      { ticker: 'RKLB', structure: 'Naked LEAP', strikes: '$5', entry: 1.85, current: 68.50, delta: 0.95, contracts: 3 },
      { ticker: 'ASTS', structure: 'Bull Spread', strikes: '$5/$15', entry: 2.40, current: 9.85, delta: 0.48, contracts: 4 },
      { ticker: 'LUNR', structure: 'Naked LEAP', strikes: '$5', entry: 1.20, current: 13.50, delta: 0.92, contracts: 5 },
      { ticker: 'BKSY', structure: 'Bull Spread', strikes: '$2/$5', entry: 0.95, current: 2.80, delta: 0.55, contracts: 5 },
      { ticker: 'RDW', structure: 'Bull Spread', strikes: '$4/$8', entry: 1.40, current: 3.90, delta: 0.62, contracts: 3 },
      { ticker: 'PL', structure: 'Bull Spread', strikes: '$2/$4', entry: 0.55, current: 1.85, delta: 0.58, contracts: 5 },
      { ticker: 'ACHR', structure: 'Naked LEAP', strikes: '$5', entry: 1.65, current: 4.20, delta: 0.72, contracts: 3 },
      { ticker: 'JOBY', structure: 'Bull Spread', strikes: '$5/$10', entry: 1.80, current: 5.40, delta: 0.65, contracts: 3 },
      { ticker: 'EVEX', structure: 'Bull Spread', strikes: '$3/$6', entry: 0.85, current: 0.35, delta: 0.28, contracts: 4 },
      { ticker: 'GME', structure: 'Bull Spread', strikes: '$12/$20', entry: 3.20, current: 7.80, delta: 0.72, contracts: 2 }
    ];
    
    const DEMO_CATALYSTS = [
      { date: '2026-01-16', ticker: 'ALL', event: 'January Options Expiration', impact: 'HIGH' },
      { date: '2026-01-21', ticker: 'RKLB', event: 'Q4 Earnings Report', impact: 'HIGH' },
      { date: '2026-01-28', ticker: 'ASTS', event: 'Q4 Earnings Report', impact: 'HIGH' },
      { date: '2026-02-10', ticker: 'LUNR', event: 'Q4 Earnings Report', impact: 'MEDIUM' },
      { date: '2026-02-15', ticker: 'LUNR', event: 'IM-2 Lunar Landing Mission', impact: 'HIGH' },
      { date: '2026-Q1', ticker: 'ACHR', event: 'FAA Type Certification Expected', impact: 'HIGH' },
      { date: '2026-Q1', ticker: 'JOBY', event: 'FAA Type Certification Expected', impact: 'HIGH' },
      { date: '2026-Q2', ticker: 'ASTS', event: 'BlueBird Commercial Service Launch', impact: 'HIGH' },
      { date: '2026-Q2', ticker: 'RKLB', event: 'Neutron Rocket First Flight', impact: 'HIGH' }
    ];
    
    const DEMO_ACTIVITY = [
      { type: 'trade', title: 'BUY LUNR', subtitle: '100 shares @ $15.20', time: '09:45' },
      { type: 'alert', title: 'MACD Crossover', subtitle: 'LUNR bullish signal', time: '09:44' },
      { type: 'trade', title: 'BUY ASTS', subtitle: '50 shares @ $78.20', time: 'PREV' },
      { type: 'trade', title: 'BUY RKLB', subtitle: '75 shares @ $68.45', time: 'PREV' },
      { type: 'alert', title: 'MACD Crossover', subtitle: 'ASTS bullish signal', time: 'JAN02' }
    ];
    
    async function init() {
      updateTime();
      setInterval(updateTime, 1000);
      try {
        const res = await fetch('data/stats.json');
        const data = await res.json();
        statsData = data.stats;
        buildWatchlist(data.tickers);
      } catch (e) {
        buildWatchlist(['RKLB', 'LUNR', 'ASTS', 'ACHR', 'JOBY', 'BKSY', 'RDW', 'PL', 'EVEX', 'GME']);
      }
      await loadTicker(currentTicker);
      renderStockPositions();
      renderOptionsPositions();
      renderCatalysts();
      renderActivity();
      renderPositionCharts();
    }
    
    function updateTime() {
      const now = new Date();
      const h = String(now.getHours()).padStart(2, '0');
      const m = String(now.getMinutes()).padStart(2, '0');
      document.getElementById('time-display').innerHTML = h + '<span class="blink">:</span>' + m;
    }
    
    function buildWatchlist(tickers) {
      document.getElementById('watchlist').innerHTML = tickers.map(t => {
        const stats = statsData[t] || {};
        const change = stats.return_1d || 0;
        const theme = tickerThemes[t] || '';
        const color = tickerColors[t] || '#33ff99';
        return '<div class="watchlist-item ' + (t === currentTicker ? 'active' : '') + '" onclick="selectTicker(\'' + t + '\')">' +
          '<div class="watchlist-info"><div class="watchlist-ticker" style="color: ' + color + '">' + t + '</div>' +
          '<div class="watchlist-meta">' + theme + '</div></div>' +
          '<div class="watchlist-data"><div class="watchlist-price">$' + (stats.current || 0).toFixed(2) + '</div>' +
          '<div class="watchlist-change ' + (change >= 0 ? 'positive' : 'negative') + '">' + (change >= 0 ? '+' : '') + change.toFixed(2) + '%</div></div></div>';
      }).join('');
    }
    
    async function loadTicker(ticker) {
      if (!tickerData[ticker]) {
        try { tickerData[ticker] = await (await fetch('data/' + ticker.toLowerCase() + '.json')).json(); } catch (e) { return; }
      }
      currentTicker = ticker;
      updateTickerDisplay();
      updateCharts();
      updateMACDDisplay();
      document.querySelectorAll('.watchlist-item').forEach(el => {
        const tickerEl = el.querySelector('.watchlist-ticker');
        el.classList.toggle('active', tickerEl && tickerEl.textContent === ticker);
      });
    }
    
    function selectTicker(ticker) { loadTicker(ticker); }
    
    function updateTickerDisplay() {
      const stats = statsData[currentTicker] || {};
      const change = stats.return_1d || 0;
      const color = tickerColors[currentTicker] || '#33ff99';
      const tickerEl = document.getElementById('chart-ticker');
      tickerEl.textContent = currentTicker;
      tickerEl.style.color = color;
      tickerEl.style.textShadow = '0 0 20px ' + color + '40';
      document.getElementById('chart-price').textContent = '$' + (stats.current || 0).toFixed(2);
      const el = document.getElementById('chart-change');
      el.textContent = (change >= 0 ? '+' : '') + change.toFixed(2) + '%';
      el.className = 'ticker-change ' + (change >= 0 ? 'positive' : 'negative');
    }
    
    function updateMACDDisplay() {
      const data = tickerData[currentTicker];
      if (!data) return;
      const source = currentTimeframe === '1D' ? data.daily : data.intraday;
      if (!source || !source.length) return;
      const latest = source[source.length - 1];
      if (latest.macd !== undefined) {
        const el = document.getElementById('macd-val');
        el.textContent = latest.macd.toFixed(4);
        el.className = 'macd-value ' + (latest.macd >= 0 ? 'positive' : 'negative');
      }
      if (latest.signal !== undefined) document.getElementById('signal-val').textContent = latest.signal.toFixed(4);
      if (latest.hist !== undefined) {
        const el = document.getElementById('hist-val');
        el.textContent = latest.hist.toFixed(4);
        el.className = 'macd-value ' + (latest.hist >= 0 ? 'positive' : 'negative');
      }
    }
    
    function setTimeframe(tf) {
      currentTimeframe = tf;
      document.querySelectorAll('.ctrl-btn[data-tf]').forEach(btn => btn.classList.toggle('active', btn.dataset.tf === tf));
      updateCharts();
      updateMACDDisplay();
    }
    
    function setRange(range) {
      currentRange = range;
      document.querySelectorAll('.ctrl-btn[data-range]').forEach(btn => btn.classList.toggle('active', btn.dataset.range === range));
      updateCharts();
    }
    
    function toggleMA() {
      showMA = !showMA;
      document.getElementById('ma-toggle').classList.toggle('active', showMA);
      updateCharts();
    }
    
    function updateCharts() {
      const data = tickerData[currentTicker];
      if (!data) return;
      let source = currentTimeframe === '1D' ? data.daily : data.intraday;
      if (!source || !source.length) return;
      const cutoff = Date.now() - (rangeDays[currentRange] * 86400000);
      source = source.filter(d => d.t > cutoff);
      const labels = source.map(d => new Date(d.t));
      const closes = source.map(d => d.c);
      const color = tickerColors[currentTicker] || '#33ff99';
      
      if (priceChart) priceChart.destroy();
      const datasets = [{ label: currentTicker, data: closes, borderColor: color, backgroundColor: color + '15', borderWidth: 2, fill: true, tension: 0.1, pointRadius: 0, pointHoverRadius: 4 }];
      if (showMA) {
        if (source.some(d => d.g100)) datasets.push({ label: 'MA 100', data: source.map(d => d.g100), borderColor: '#ffb347', borderWidth: 1, fill: false, tension: 0.1, pointRadius: 0 });
        if (source.some(d => d.g150)) datasets.push({ label: 'MA 150', data: source.map(d => d.g150), borderColor: '#b388ff', borderWidth: 1, fill: false, tension: 0.1, pointRadius: 0 });
        if (source.some(d => d.g200)) datasets.push({ label: 'MA 200', data: source.map(d => d.g200), borderColor: '#47d4ff', borderWidth: 1, fill: false, tension: 0.1, pointRadius: 0 });
      }
      priceChart = new Chart(document.getElementById('price-chart'), {
        type: 'line', data: { labels, datasets },
        options: {
          responsive: true, maintainAspectRatio: false, interaction: { mode: 'index', intersect: false },
          plugins: {
            legend: { display: showMA, position: 'top', labels: { boxWidth: 12, font: { size: 10, family: "'IBM Plex Mono', monospace" }, color: '#5a7068' } },
            tooltip: { backgroundColor: 'rgba(10, 12, 15, 0.95)', titleColor: '#e8f4f0', bodyColor: '#a8c0b8', borderColor: '#1e2832', borderWidth: 1, titleFont: { family: "'IBM Plex Mono', monospace" }, bodyFont: { family: "'IBM Plex Mono', monospace" }, callbacks: { label: i => i.dataset.label + ': $' + i.parsed.y.toFixed(2) } }
          },
          scales: {
            x: { type: 'time', grid: { color: 'rgba(51, 255, 153, 0.05)' }, ticks: { color: '#3a4a44', font: { family: "'IBM Plex Mono', monospace", size: 10 }, maxTicksLimit: 8 } },
            y: { position: 'right', grid: { color: 'rgba(51, 255, 153, 0.05)' }, ticks: { color: '#5a7068', font: { family: "'IBM Plex Mono', monospace", size: 10 }, callback: v => '$' + v.toFixed(2) } }
          }
        }
      });
      
      if (macdChart) macdChart.destroy();
      const macdData = source.map(d => d.macd), signalData = source.map(d => d.signal), histData = source.map(d => d.hist);
      macdChart = new Chart(document.getElementById('macd-chart'), {
        type: 'bar', data: { labels, datasets: [
          { label: 'Histogram', data: histData, type: 'bar', order: 2, backgroundColor: histData.map(v => v >= 0 ? 'rgba(51, 255, 153, 0.5)' : 'rgba(255, 107, 107, 0.5)'), borderColor: histData.map(v => v >= 0 ? '#33ff99' : '#ff6b6b'), borderWidth: 1 },
          { label: 'MACD', data: macdData, type: 'line', order: 1, borderColor: '#47d4ff', borderWidth: 1.5, fill: false, tension: 0.1, pointRadius: 0 },
          { label: 'Signal', data: signalData, type: 'line', order: 0, borderColor: '#ffb347', borderWidth: 1.5, fill: false, tension: 0.1, pointRadius: 0 }
        ]},
        options: { responsive: true, maintainAspectRatio: false, plugins: { legend: { display: false } }, scales: { x: { type: 'time', display: false }, y: { position: 'right', grid: { color: 'rgba(51, 255, 153, 0.05)' }, ticks: { color: '#5a7068', font: { family: "'IBM Plex Mono', monospace", size: 9 } } } } }
      });
    }
    
    function switchTab(tabName) {
      document.querySelectorAll('.nav-tab').forEach(t => t.classList.toggle('active', t.dataset.tab === tabName));
      document.querySelectorAll('.tab-panel').forEach(p => p.classList.toggle('active', p.id === tabName + '-panel'));
    }
    
    function switchChartTab(chartName) {
      document.querySelectorAll('.chart-tab').forEach(t => t.classList.toggle('active', t.dataset.chart === chartName));
      document.querySelectorAll('.chart-panel').forEach(p => p.classList.toggle('active', p.id === 'chart-' + chartName));
    }
    
    function renderStockPositions() {
      document.getElementById('stock-tbody').innerHTML = DEMO_STOCK_POSITIONS.map(pos => {
        const value = pos.shares * pos.current_price;
        const pnl = (pos.current_price - pos.entry_price) * pos.shares;
        const pnlPct = ((pos.current_price - pos.entry_price) / pos.entry_price * 100);
        const color = tickerColors[pos.ticker] || '#33ff99';
        return '<tr><td><span class="ticker-tag"><span class="ticker-dot" style="background: ' + color + '"></span>' + pos.ticker + '</span></td>' +
          '<td style="color: var(--text-dim); font-size: 0.65rem; letter-spacing: 0.05em;">' + (tickerThemes[pos.ticker] || '') + '</td>' +
          '<td>' + pos.shares + '</td><td>$' + pos.entry_price.toFixed(2) + '</td><td>$' + pos.current_price.toFixed(2) + '</td>' +
          '<td>$' + value.toLocaleString() + '</td>' +
          '<td class="' + (pnl >= 0 ? 'pnl-positive' : 'pnl-negative') + '">' + (pnl >= 0 ? '+' : '') + '$' + pnl.toFixed(0) + ' (' + (pnlPct >= 0 ? '+' : '') + pnlPct.toFixed(1) + '%)</td></tr>';
      }).join('');
    }
    
    function renderOptionsPositions() {
      document.getElementById('options-tbody').innerHTML = DEMO_OPTIONS.map(pos => {
        const pnl = (pos.current - pos.entry) * pos.contracts * 100;
        const pnlPct = ((pos.current - pos.entry) / pos.entry * 100);
        const color = tickerColors[pos.ticker] || '#33ff99';
        return '<tr><td><span class="ticker-tag"><span class="ticker-dot" style="background: ' + color + '"></span>' + pos.ticker + '</span></td>' +
          '<td><span class="structure-tag">' + pos.structure + '</span></td><td>' + pos.strikes + '</td>' +
          '<td>$' + pos.entry.toFixed(2) + '</td><td>$' + pos.current.toFixed(2) + '</td>' +
          '<td class="' + (pnl >= 0 ? 'pnl-positive' : 'pnl-negative') + '">' + (pnl >= 0 ? '+' : '') + '$' + pnl.toFixed(0) + ' (' + (pnlPct >= 0 ? '+' : '') + pnlPct.toFixed(0) + '%)</td>' +
          '<td>' + pos.delta.toFixed(2) + '</td></tr>';
      }).join('');
    }
    
    function renderPositionCharts() {
      const positions = DEMO_OPTIONS.map(pos => ({ ticker: pos.ticker, value: pos.current * pos.contracts * 100, color: tickerColors[pos.ticker] || '#33ff99' })).sort((a, b) => b.value - a.value);
      const maxValue = Math.max(...positions.map(p => p.value));
      const totalValue = positions.reduce((s, x) => s + x.value, 0);
      document.getElementById('chart-sizes').innerHTML = '<div class="bar-chart">' + positions.map(p =>
        '<div class="bar-row"><span class="bar-ticker" style="color: ' + p.color + '">' + p.ticker + '</span>' +
        '<div class="bar-container"><div class="bar-fill" style="width: ' + (p.value/maxValue*100) + '%; background: ' + p.color + '">' + Math.round(p.value/totalValue*100) + '%</div></div>' +
        '<span class="bar-value">$' + p.value.toLocaleString() + '</span></div>'
      ).join('') + '</div>';
      
      const pnlData = DEMO_OPTIONS.map(pos => ({ ticker: pos.ticker, pnl: (pos.current - pos.entry) * pos.contracts * 100, pct: ((pos.current - pos.entry) / pos.entry * 100), color: tickerColors[pos.ticker] || '#33ff99' })).sort((a, b) => b.pnl - a.pnl);
      const maxPnl = Math.max(...pnlData.map(p => Math.abs(p.pnl)));
      let winners = 0, losers = 0, totalPnl = 0;
      pnlData.forEach(p => { if (p.pnl >= 0) winners++; else losers++; totalPnl += p.pnl; });
      document.getElementById('chart-pnl').innerHTML = '<div class="bar-chart">' + pnlData.map(p =>
        '<div class="pnl-row"><span class="bar-ticker" style="color: ' + p.color + '">' + p.ticker + '</span>' +
        '<div class="pnl-bar-container"><div class="pnl-center-line"></div>' +
        '<div class="pnl-bar ' + (p.pnl >= 0 ? 'positive' : 'negative') + '" style="width: ' + (Math.abs(p.pnl)/maxPnl*50) + '%">' + (p.pnl >= 0 ? '+' : '') + p.pct.toFixed(0) + '%</div></div>' +
        '<span class="pnl-amount ' + (p.pnl >= 0 ? 'positive' : 'negative') + '">' + (p.pnl >= 0 ? '+' : '') + '$' + Math.abs(p.pnl).toLocaleString() + '</span></div>'
      ).join('') + '</div>' +
      '<div class="summary-row"><div class="summary-item"><div class="summary-value positive">' + winners + '</div><div class="summary-label">Winners</div></div>' +
      '<div class="summary-item"><div class="summary-value positive">+$' + totalPnl.toLocaleString() + '</div><div class="summary-label">Total P&L</div></div>' +
      '<div class="summary-item"><div class="summary-value negative">' + losers + '</div><div class="summary-label">Losers</div></div></div>';
    }
    
    function renderCatalysts() {
      document.getElementById('catalyst-list').innerHTML = DEMO_CATALYSTS.map(cat => {
        const color = tickerColors[cat.ticker] || '#5a7068';
        return '<div class="catalyst-item"><span class="catalyst-date">' + cat.date + '</span>' +
          '<span class="catalyst-ticker" style="color: ' + color + '">' + cat.ticker + '</span>' +
          '<span class="catalyst-event">' + cat.event + '</span>' +
          '<span class="catalyst-impact ' + cat.impact.toLowerCase() + '">' + cat.impact + '</span></div>';
      }).join('');
    }
    
    function renderActivity() {
      const tradeSvg = '<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><polyline points="23 6 13.5 15.5 8.5 10.5 1 18"/><polyline points="17 6 23 6 23 12"/></svg>';
      const alertSvg = '<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M10.29 3.86L1.82 18a2 2 0 0 0 1.71 3h16.94a2 2 0 0 0 1.71-3L13.71 3.86a2 2 0 0 0-3.42 0z"/><line x1="12" y1="9" x2="12" y2="13"/><line x1="12" y1="17" x2="12.01" y2="17"/></svg>';
      document.getElementById('activity-feed').innerHTML = DEMO_ACTIVITY.map(act =>
        '<div class="activity-item"><div class="activity-icon ' + act.type + '">' + (act.type === 'trade' ? tradeSvg : alertSvg) + '</div>' +
        '<div class="activity-content"><div class="activity-title">' + act.title + '</div><div class="activity-subtitle">' + act.subtitle + '</div></div>' +
        '<div class="activity-time">' + act.time + '</div></div>'
      ).join('');
    }
    
    function toggleKillSwitch() {
      const btn = document.querySelector('.kill-switch-btn');
      const status = document.querySelector('.kill-switch-status');
      if (btn.classList.contains('stop')) {
        btn.classList.replace('stop', 'resume');
        btn.textContent = 'RESUME OPERATIONS';
        status.textContent = 'Trading halted';
      } else {
        btn.classList.replace('resume', 'stop');
        btn.textContent = 'ABORT ALL TRADES';
        status.textContent = 'System operational';
      }
    }
    
    init();
  </script>
</body>
</html>
